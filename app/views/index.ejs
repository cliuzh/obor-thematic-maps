<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <title>The Map</title>
  <script src='js/d3.v5.min.js'></script>
  <script src='js/jquery-3.3.1.min.js'></script>
</head>

<body>
  <script>
    const docs = <%- JSON.stringify(locals.docs) %>;

    const mapWidth = 1040;
    const mapHeight = 585;

    const geoCenter = [90, 60];
    const projection = d3.geoMercator().center(geoCenter).scale(175);
    const path = d3.geoPath().projection(projection);

    const svg = d3.select('body').append('svg')
      .attr('style', 'background: #E5E7E9;')
      .attr('stroke', 'white')
      .attr('fill', '#85929E')
      .attr('width', mapWidth)
      .attr('height', mapHeight);

    const g = svg.append('g')
      .selectAll('path')
      .data(docs.map(doc => doc.geo))
      .enter()
      .append('path')
      .attr('d', path);
  </script>
</body>

</html>